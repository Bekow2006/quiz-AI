<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AI Quiz Maker</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #6c5ce7; color: white; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .card { background: white; color: #333; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center; width: 350px; }
        input { width: 100%; padding: 12px; margin: 20px 0; border: 2px solid #eee; border-radius: 10px; box-sizing: border-box; font-size: 16px; }
        button { background: #00b894; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 18px; font-weight: bold; width: 100%; transition: 0.3s; }
        button:hover { background: #00947a; transform: scale(1.02); }
        #status { margin-top: 20px; font-style: italic; color: #666; }
    </style>
</head>
<body>
    <div class="card">
        <h2>–°–æ–∑–¥–∞—Ç—å –ö–≤–∏–∑ üìù</h2>
        <p>–í–≤–µ–¥–∏ —Ç–µ–º—É, –∏ –ò–ò –ø—Ä–∏–¥—É–º–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã</p>
        <input type="text" id="topic" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò—Å—Ç–æ—Ä–∏—è –º–µ–º–æ–≤">
        <button onclick="startMagic()">–°–æ–∑–¥–∞—Ç—å –ú–∞–≥–∏—é</button>
        <div id="status"></div>
    </div>

<script>
// –í–°–¢–ê–í–¨ –ù–û–í–´–ô –ö–õ–Æ–ß –ù–ò–ñ–ï
const apiKey = "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"; 

async function startMagic() {
    const topic = document.getElementById('topic').value;
    const status = document.getElementById('status');
    
    if(!topic) return alert("–í–≤–µ–¥–∏ —Ç–µ–º—É!");
    status.innerHTML = "ü™Ñ –ú–∞–≥–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...";

    try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
            method: "POST",
            headers: {
                "Authorization": `Bearer ${apiKey}`,
                "Content-Type": "application/json",
                "HTTP-Referer": "https://vercel.com", // –î–æ–±–∞–≤–∏–ª–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
                "X-Title": "QuizMaker" 
            },
            body: JSON.stringify({
                "model": "huggingfaceh4/zephyr-7b-beta:free", 
                "messages": [
                    {
                        "role": "user", 
                        "content": `–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 1 –≤–æ–ø—Ä–æ—Å –ø—Ä–æ ${topic} –Ω–∞ —Ä—É—Å—Å–∫–æ–º. 
                        –§–æ—Ä–º–∞—Ç: –í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç1 | –û—Ç–≤–µ—Ç2 | –û—Ç–≤–µ—Ç3 | –ù–æ–º–µ—Ä–ü—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ(1-3)`
                    }
                ]
            })
        });

        const data = await response.json();

        if (data.choices && data.choices[0]) {
            const text = data.choices[0].message.content;
            const parts = text.split('|'); // –†–∞–∑–±–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ —Å–∏–º–≤–æ–ª—É "|"
            
            if(parts.length >= 5) {
                status.innerHTML = `
                    <div style="background:#eee; padding:15px; border-radius:10px; color:black">
                        <h3>${parts[0]}</h3>
                        <button onclick="check(1, ${parts[4]})" style="margin:5px">${parts[1]}</button>
                        <button onclick="check(2, ${parts[4]})" style="margin:5px">${parts[2]}</button>
                        <button onclick="check(3, ${parts[4]})" style="margin:5px">${parts[3]}</button>
                    </div>
                `;
            } else {
                status.innerHTML = "–ò–ò –æ—Ç–≤–µ—Ç–∏–ª –Ω–µ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑: <br>" + text;
            }
        } else {
            status.innerHTML = "‚ùå –û—à–∏–±–∫–∞: " + (data.error ? data.error.message : "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç");
        }
    } catch (e) {
        status.innerHTML = "‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏";
    }
}

function check(selected, correct) {
    if (selected == correct) {
        alert("–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ");
    } else {
        alert("–û—à–∏–±–æ—á–∫–∞... üò¢");
    }
}
</script>
</body>
</html>
