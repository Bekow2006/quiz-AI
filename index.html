<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AI Quizizz</title>
    <style>
        body { font-family: sans-serif; background: #6c5ce7; color: white; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .card { background: white; color: #333; padding: 30px; border-radius: 20px; width: 350px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 20px 0; border: 2px solid #eee; border-radius: 10px; }
        button { background: #00b894; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; width: 100%; margin-bottom: 10px; font-weight: bold; }
        .ans-btn { background: #6c5ce7; }
    </style>
</head>
<body>
    <div class="card" id="game-card">
        <h2>AI Quiz üß†</h2>
        <div id="setup">
            <input type="text" id="topic" placeholder="–¢–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ö–æ—Å–º–æ—Å)">
            <button onclick="startMagic()">–°–æ–∑–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
        </div>
        <div id="status" style="margin-top:15px; color:#666; font-size:13px;"></div>
    </div>
<script>
        const startPart = "hf_"; 
        const endPart = "lSnaYMMuuIXimrooLQjUvmBPgLJmMmwHGE"; // –°—é–¥–∞ —Ç–æ–ª—å–∫–æ —Ö–≤–æ—Å—Ç —Ç–æ–∫–µ–Ω–∞!
        const hfToken = startPart + endPart;

async function startMagic() {
            const topic = document.getElementById('topic').value;
            const status = document.getElementById('status');
            if(!topic) return alert("–í–≤–µ–¥–∏ —Ç–µ–º—É!");
            status.innerHTML = "ü§ñ –ò–ò –¥—É–º–∞–µ—Ç...";

            try {
                const response = await fetch("https://api-inference.huggingface.co/models/Mistralai/Mistral-7B-Instruct-v0.2", {
    headers: { 
        "Authorization": "Bearer " + hfToken,
        "Content-Type": "application/json"
    },
    method: "POST",
    body: JSON.stringify({ 
        inputs: "[INST] –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π 1 –≤–æ–ø—Ä–æ—Å –ø—Ä–æ " + topic + " –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –§–æ—Ä–º–∞—Ç: –í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç1 | –û—Ç–≤–µ—Ç2 | –û—Ç–≤–µ—Ç3 | 1 [/INST]",
        options: { wait_for_model: true } // –≠—Ç–∞ —Å—Ç—Ä–æ—á–∫–∞ –ø—Ä–æ—Å–∏—Ç —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–æ–∂–¥–∞—Ç—å, –µ—Å–ª–∏ –æ–Ω –∑–∞–Ω—è—Ç
    })
});

                const result = await response.json();

                // –≠–¢–û–¢ –ë–õ–û–ö –ü–û–ö–ê–ñ–ï–¢ –†–ï–ê–õ–¨–ù–£–Æ –û–®–ò–ë–ö–£
                if (result.error) {
                    if (JSON.stringify(result.error).includes("loading")) {
                        status.innerHTML = "‚è≥ –ú–æ–¥–µ–ª—å –ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è. –ù–∞–∂–º–∏ –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ 15 —Å–µ–∫.";
                    } else {
                        status.innerHTML = "‚ùå –û—à–∏–±–∫–∞ –æ—Ç –ò–ò: " + JSON.stringify(result.error);
                    }
                    return;
                }

                const aiText = result[0].generated_text.split('[/INST]')[1].trim();
                const p = aiText.split('|');

                if(p.length >= 5) {
                    document.getElementById('game-card').innerHTML = "<h3>" + p[0] + "</h3>" +
                    "<button class='ans-btn' onclick='check(1," + p[4] + ")'>" + p[1] + "</button>" +
                    "<button class='ans-btn' onclick='check(2," + p[4] + ")'>" + p[2] + "</button>" +
                    "<button class='ans-btn' onclick='check(3," + p[4] + ")'>" + p[3] + "</button>";
                }
            } catch (e) { 
                status.innerHTML = "‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: " + e.message; 
            }
        }

        function check(chosen, correct) {
            if(chosen == correct) { alert("–í–µ—Ä–Ω–æ! üéâ"); location.reload(); }
            else { alert("–ú–∏–º–æ! üôÉ"); }
        }
    </script>
</body>
</html>
</script>
</body>
</html>
