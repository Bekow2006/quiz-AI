<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AI Quiz Maker</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #6c5ce7; color: white; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .card { background: white; color: #333; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center; width: 350px; }
        input { width: 100%; padding: 12px; margin: 20px 0; border: 2px solid #eee; border-radius: 10px; box-sizing: border-box; font-size: 16px; }
        button { background: #00b894; color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 18px; font-weight: bold; width: 100%; transition: 0.3s; }
        button:hover { background: #00947a; transform: scale(1.02); }
        #status { margin-top: 20px; font-style: italic; color: #666; }
    </style>
</head>
<body>
    <div class="card">
        <h2>–°–æ–∑–¥–∞—Ç—å –ö–≤–∏–∑ üìù</h2>
        <p>–í–≤–µ–¥–∏ —Ç–µ–º—É, –∏ –ò–ò –ø—Ä–∏–¥—É–º–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã</p>
        <input type="text" id="topic" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò—Å—Ç–æ—Ä–∏—è –º–µ–º–æ–≤">
        <button onclick="startMagic()">–°–æ–∑–¥–∞—Ç—å –ú–∞–≥–∏—é</button>
        <div id="status"></div>
    </div>

<script>
// –í–°–¢–ê–í–¨ –¢–£–¢ –ù–û–í–´–ô –ö–õ–Æ–ß (—Å—Ç–∞—Ä—ã–π –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç)
const apiKey = "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"; 

async function startMagic() {
    const topic = document.getElementById('topic').value;
    const status = document.getElementById('status');
    
    if(!topic) return alert("–í–≤–µ–¥–∏ —Ç–µ–º—É!");
    
    status.innerHTML = "üßô‚Äç‚ôÇÔ∏è –í—ã–∑—ã–≤–∞–µ–º –¥—É—Ö–æ–≤ –∑–Ω–∞–Ω–∏–π...";

    try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
            method: "POST",
            headers: {
                "Authorization": `Bearer ${apiKey}`,
                "Content-Type": "application/json",
                "HTTP-Referer": window.location.origin, // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è OpenRouter
                "X-Title": "My Free Quizizz"
            },
            body: JSON.stringify({
                "model": "mistralai/mistral-7b-instruct:free", // –°—Ç–∞–±–∏–ª—å–Ω–∞—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å
                "messages": [
                    {
                        "role": "user", 
                        "content": `–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –û–î–ò–ù —Å–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø—Ä–æ ${topic} –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. 
                        –û—Ç–≤–µ—Ç—å –°–¢–†–û–ì–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ (–±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤):
                        –í–æ–ø—Ä–æ—Å|–í–∞—Ä–∏–∞–Ω—Ç1|–í–∞—Ä–∏–∞–Ω—Ç2|–í–∞—Ä–∏–∞–Ω—Ç3|–ù–æ–º–µ—Ä–ü—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ(1, 2 –∏–ª–∏ 3)`
                    }
                ]
            })
        });

        const data = await response.json();

        if (data.error) {
            status.innerHTML = "‚ùå –û—à–∏–±–∫–∞ –æ—Ç –ò–ò: " + data.error.message;
            return;
        }

        const aiText = data.choices[0].message.content;
        const parts = aiText.split('|');

        if (parts.length >= 5) {
            renderQuiz(parts[0], parts[1], parts[2], parts[3], parts[4].trim());
        } else {
            status.innerHTML = "ü§ñ –ò–ò –Ω–µ–º–Ω–æ–≥–æ –∑–∞–ø—É—Ç–∞–ª—Å—è, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!<br><small>" + aiText + "</small>";
        }
        
    } catch (error) {
        status.innerHTML = "‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: " + error.message;
    }
}

function renderQuiz(q, a1, a2, a3, correct) {
    const status = document.getElementById('status');
    status.innerHTML = `
        <div style="background:#f0f0f0; padding:15px; border-radius:15px; color:#333; margin-top:20px;">
            <h3 style="margin-bottom:15px;">${q}</h3>
            <button onclick="check(1, ${correct})" style="background:#6c5ce7; margin-bottom:10px;">${a1}</button>
            <button onclick="check(2, ${correct})" style="background:#6c5ce7; margin-bottom:10px;">${a2}</button>
            <button onclick="check(3, ${correct})" style="background:#6c5ce7; margin-bottom:10px;">${a3}</button>
        </div>
    `;
}

function check(selected, correct) {
    if(selected == correct) {
        alert("–ì–ï–ù–ò–ê–õ–¨–ù–û! üéâ");
    } else {
        alert("–£–≤—ã, —ç—Ç–æ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑! ‚ö°");
    }
}
</script>
</body>
</html>
